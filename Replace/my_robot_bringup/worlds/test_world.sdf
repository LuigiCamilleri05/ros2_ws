<sdf version='1.10'>
  <world name='empty'>
    <physics name='1ms' type='ignored'>
      <max_step_size>0.001</max_step_size>
      <real_time_factor>1</real_time_factor>
      <real_time_update_rate>1000</real_time_update_rate>
    </physics>

    <plugin name='gz::sim::systems::Physics' filename='gz-sim-physics-system'/>
    <plugin name='gz::sim::systems::UserCommands' filename='gz-sim-user-commands-system'/>
    <plugin name='gz::sim::systems::SceneBroadcaster' filename='gz-sim-scene-broadcaster-system'/>
    <plugin name='gz::sim::systems::Contact' filename='gz-sim-contact-system'/>
    <plugin name='gz::sim::systems::Sensors' filename='gz-sim-sensors-system'>
      <render_engine>ogre2</render_engine>
    </plugin>

    <gravity>0 0 -9.8</gravity>

    <scene>
      <ambient>0.4 0.4 0.4 1</ambient>
      <background>0.7 0.7 0.7 1</background>
      <shadows>true</shadows>
    </scene>

    <!-- Ground plane -->
    <model name='ground_plane'>
      <static>true</static>
      <pose>0 0 0 0 0 0</pose>
      <link name='link'>
        <collision name='collision'>
          <geometry>
            <plane>
              <normal>0 0 1</normal>
              <size>30 30</size>
            </plane>
          </geometry>
          <surface><friction><ode/></friction></surface>
        </collision>
        <visual name='visual'>
          <geometry>
            <plane>
              <normal>0 0 1</normal>
              <size>30 30</size>
            </plane>
          </geometry>
          <material>
            <ambient>0.8 0.8 0.8 1</ambient>
            <diffuse>0.8 0.8 0.8 1</diffuse>
          </material>
        </visual>
      </link>
    </model>

    <!-- Boundary walls -->
    <model name='wall_north'>
      <static>true</static>
      <pose>0 10 0.5 0 0 0</pose>
      <link name='link'>
        <collision name='col'><geometry><box><size>20 0.3 1.0</size></box></geometry></collision>
        <visual name='vis'><geometry><box><size>20 0.3 1.0</size></box></geometry></visual>
      </link>
    </model>

    <model name='wall_south'>
      <static>true</static>
      <pose>0 -10 0.5 0 0 0</pose>
      <link name='link'>
        <collision name='col'><geometry><box><size>20 0.3 1.0</size></box></geometry></collision>
        <visual name='vis'><geometry><box><size>20 0.3 1.0</size></box></geometry></visual>
      </link>
    </model>

    <model name='wall_west'>
      <static>true</static>
      <pose>-10 0 0.5 0 0 0</pose>
      <link name='link'>
        <collision name='col'><geometry><box><size>0.3 20 1.0</size></box></geometry></collision>
        <visual name='vis'><geometry><box><size>0.3 20 1.0</size></box></geometry></visual>
      </link>
    </model>

    <model name='wall_east'>
      <static>true</static>
      <pose>10 0 0.5 0 0 0</pose>
      <link name='link'>
        <collision name='col'><geometry><box><size>0.3 20 1.0</size></box></geometry></collision>
        <visual name='vis'><geometry><box><size>0.3 20 1.0</size></box></geometry></visual>
      </link>
    </model>

    <!-- Static box obstacles -->
    <model name='box_00'>
      <static>true</static>
      <pose>-6.5 -4.3 0.4 0 0 0.6</pose>
      <link name='link'>
        <collision name='col'><geometry><box><size>1.4 0.8 0.8</size></box></geometry></collision>
        <visual name='vis'><geometry><box><size>1.4 0.8 0.8</size></box></geometry></visual>
      </link>
    </model>

    <model name='box_01'>
      <static>true</static>
      <pose>-2.2 1.7 0.3 0 0 -0.2</pose>
      <link name='link'>
        <collision name='col'><geometry><box><size>0.9 1.2 0.6</size></box></geometry></collision>
        <visual name='vis'><geometry><box><size>0.9 1.2 0.6</size></box></geometry></visual>
      </link>
    </model>

    <model name='box_02'>
      <static>true</static>
      <pose>1.4 -3.5 0.25 0 0 1.1</pose>
      <link name='link'>
        <collision name='col'><geometry><box><size>1.1 0.7 0.5</size></box></geometry></collision>
        <visual name='vis'><geometry><box><size>1.1 0.7 0.5</size></box></geometry></visual>
      </link>
    </model>

    <model name='box_03'>
      <static>true</static>
      <pose>4.7 2.9 0.35 0 0 0.4</pose>
      <link name='link'>
        <collision name='col'><geometry><box><size>1.6 0.6 0.7</size></box></geometry></collision>
        <visual name='vis'><geometry><box><size>1.6 0.6 0.7</size></box></geometry></visual>
      </link>
    </model>

    <model name='box_04'>
      <static>true</static>
      <pose>6.2 -6.1 0.45 0 0 -0.8</pose>
      <link name='link'>
        <collision name='col'><geometry><box><size>1.8 0.9 0.9</size></box></geometry></collision>
        <visual name='vis'><geometry><box><size>1.8 0.9 0.9</size></box></geometry></visual>
      </link>
    </model>

    <model name='box_05'>
      <static>true</static>
      <pose>-0.8 6.4 0.3 0 0 0.9</pose>
      <link name='link'>
        <collision name='col'><geometry><box><size>1.0 1.0 0.6</size></box></geometry></collision>
        <visual name='vis'><geometry><box><size>1.0 1.0 0.6</size></box></geometry></visual>
      </link>
    </model>

    <!-- Static cylindrical obstacles -->
    <model name='cyl_00'>
      <static>true</static>
      <pose>-7.8 3.8 0.5 0 0 0</pose>
      <link name='link'>
        <collision name='col'><geometry><cylinder><radius>0.35</radius><length>1.0</length></cylinder></geometry></collision>
        <visual name='vis'><geometry><cylinder><radius>0.35</radius><length>1.0</length></cylinder></geometry></visual>
      </link>
    </model>

    <model name='cyl_01'>
      <static>true</static>
      <pose>-3.9 -8.0 0.4 0 0 0</pose>
      <link name='link'>
        <collision name='col'><geometry><cylinder><radius>0.25</radius><length>0.8</length></cylinder></geometry></collision>
        <visual name='vis'><geometry><cylinder><radius>0.25</radius><length>0.8</length></cylinder></geometry></visual>
      </link>
    </model>

    <model name='cyl_02'>
      <static>true</static>
      <pose>2.6 7.6 0.55 0 0 0</pose>
      <link name='link'>
        <collision name='col'><geometry><cylinder><radius>0.30</radius><length>1.1</length></cylinder></geometry></collision>
        <visual name='vis'><geometry><cylinder><radius>0.30</radius><length>1.1</length></cylinder></geometry></visual>
      </link>
    </model>

    <model name='cyl_03'>
      <static>true</static>
      <pose>7.4 -1.8 0.4 0 0 0</pose>
      <link name='link'>
        <collision name='col'><geometry><cylinder><radius>0.40</radius><length>0.8</length></cylinder></geometry></collision>
        <visual name='vis'><geometry><cylinder><radius>0.40</radius><length>0.8</length></cylinder></geometry></visual>
      </link>
    </model>

    <model name='cyl_04'>
      <static>true</static>
      <pose>6.8 7.8 0.5 0 0 0</pose>
      <link name='link'>
        <collision name='col'><geometry><cylinder><radius>0.30</radius><length>1.0</length></cylinder></geometry></collision>
        <visual name='vis'><geometry><cylinder><radius>0.30</radius><length>1.0</length></cylinder></geometry></visual>
      </link>
    </model>

    <model name='cyl_05'>
      <static>true</static>
      <pose>-4.2 8.1 0.35 0 0 0</pose>
      <link name='link'>
        <collision name='col'><geometry><cylinder><radius>0.20</radius><length>0.7</length></cylinder></geometry></collision>
        <visual name='vis'><geometry><cylinder><radius>0.20</radius><length>0.7</length></cylinder></geometry></visual>
      </link>
    </model>

    <!-- TARGET (GOAL) MARKER -->
    <model name='goal_marker'>
      <static>true</static>
      <pose>8.0 8.0 0.25 0 0 0</pose>
      <link name='link'>
        <collision name='col'>
          <geometry>
            <cylinder>
              <radius>0.30</radius>
              <length>0.50</length>
            </cylinder>
          </geometry>
        </collision>
        <visual name='vis'>
          <geometry>
            <cylinder>
              <radius>0.30</radius>
              <length>0.50</length>
            </cylinder>
          </geometry>
          <material>
            <ambient>0.0 0.8 0.0 1</ambient>
            <diffuse>0.0 1.0 0.0 1</diffuse>
            <specular>0.1 0.1 0.1 1</specular>
          </material>
        </visual>
      </link>
    </model>

    <!-- DYNAMIC OBSTACLES (MOVING BOXES) -->
    <!-- Dynamic box 1: slides along +X / -X -->
    <model name='dyn_box_01'>
      <static>false</static>
      <pose>-2.0 0.0 0.25 0 0 0</pose>

      <link name='base_link'>
        <collision name='col'><geometry><box><size>0.8 0.8 0.5</size></box></geometry></collision>
        <visual name='vis'>
          <geometry><box><size>0.8 0.8 0.5</size></box></geometry>
          <material>
            <ambient>0.8 0.2 0.2 1</ambient>
            <diffuse>0.9 0.2 0.2 1</diffuse>
          </material>
        </visual>
        <inertial>
          <mass>5.0</mass>
          <inertia>
            <ixx>0.10</ixx><iyy>0.10</iyy><izz>0.10</izz>
            <ixy>0</ixy><ixz>0</ixz><iyz>0</iyz>
          </inertia>
        </inertial>
      </link>

      <!-- ANCHORED prismatic joint to world (no floating slider_link) -->
      <joint name='slider_joint' type='prismatic'>
        <parent>world</parent>
        <child>base_link</child>
        <axis>
          <xyz>1 0 0</xyz>
          <limit>
            <lower>-3.0</lower>
            <upper>3.0</upper>
            <effort>500</effort>
          </limit>
        </axis>
      </joint>

      <plugin name="gz::sim::systems::JointPositionController"
              filename="gz-sim-joint-position-controller-system">
        <joint_name>slider_joint</joint_name>
        <topic>/model/dyn_box_01/joint/slider_joint/cmd_pos</topic>
      </plugin>
    </model>

    <!-- Dynamic box 2: slides along +Y / -Y -->
    <model name='dyn_box_02'>
      <static>false</static>
      <pose>3.5 -2.5 0.25 0 0 0</pose>

      <link name='base_link'>
        <collision name='col'><geometry><box><size>1.2 0.6 0.5</size></box></geometry></collision>
        <visual name='vis'>
          <geometry><box><size>1.2 0.6 0.5</size></box></geometry>
          <material>
            <ambient>0.2 0.2 0.8 1</ambient>
            <diffuse>0.2 0.2 0.9 1</diffuse>
          </material>
        </visual>
        <inertial>
          <mass>6.0</mass>
          <inertia>
            <ixx>0.12</ixx><iyy>0.08</iyy><izz>0.12</izz>
            <ixy>0</ixy><ixz>0</ixz><iyz>0</iyz>
          </inertia>
        </inertial>
      </link>

      <joint name='slider_joint' type='prismatic'>
        <parent>world</parent>
        <child>base_link</child>
        <axis>
          <xyz>0 1 0</xyz>
          <limit>
            <lower>-2.5</lower>
            <upper>2.5</upper>
            <effort>500</effort>
          </limit>
        </axis>
      </joint>

      <plugin name="gz::sim::systems::JointPositionController"
              filename="gz-sim-joint-position-controller-system">
        <joint_name>slider_joint</joint_name>
        <topic>/model/dyn_box_02/joint/slider_joint/cmd_pos</topic>
      </plugin>
    </model>

    <!-- Dynamic box 3: slides along +X / -X in the upper area -->
    <model name='dyn_box_03'>
      <static>false</static>
      <pose>0.0 6.5 0.25 0 0 0</pose>

      <link name='base_link'>
        <collision name='col'><geometry><box><size>0.9 0.9 0.5</size></box></geometry></collision>
        <visual name='vis'>
          <geometry><box><size>0.9 0.9 0.5</size></box></geometry>
          <material>
            <ambient>0.8 0.6 0.2 1</ambient>
            <diffuse>0.9 0.7 0.2 1</diffuse>
          </material>
        </visual>
        <inertial>
          <mass>5.5</mass>
          <inertia>
            <ixx>0.10</ixx><iyy>0.10</iyy><izz>0.10</izz>
            <ixy>0</ixy><ixz>0</ixz><iyz>0</iyz>
          </inertia>
        </inertial>
      </link>

      <joint name='slider_joint' type='prismatic'>
        <parent>world</parent>
        <child>base_link</child>
        <axis>
          <xyz>1 0 0</xyz>
          <limit>
            <lower>-4.0</lower>
            <upper>4.0</upper>
            <effort>500</effort>
          </limit>
        </axis>
      </joint>

      <plugin name="gz::sim::systems::JointPositionController"
              filename="gz-sim-joint-position-controller-system">
        <joint_name>slider_joint</joint_name>
        <topic>/model/dyn_box_03/joint/slider_joint/cmd_pos</topic>
      </plugin>
    </model>

    <!-- Sun light -->
    <light name='sun' type='directional'>
      <pose>0 0 10 0 0 0</pose>
      <cast_shadows>true</cast_shadows>
      <intensity>1</intensity>
      <direction>-0.5 0.1 -0.9</direction>
      <diffuse>0.8 0.8 0.8 1</diffuse>
      <specular>0.2 0.2 0.2 1</specular>
      <attenuation>
        <range>1000</range>
        <linear>0.01</linear>
        <constant>0.9</constant>
        <quadratic>0.001</quadratic>
      </attenuation>
    </light>

  </world>
</sdf>

